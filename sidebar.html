<aside
    class="min-w-16 w-56 bg-gradient-to-b from-primary to-blue-800 h-screen py-4 relative transition-all ease-in-out">

    <div class="space-y-6 w-full text-white text-md">
        <div class="pl-5 pt-2 min-w-16 w-full mb-20">
            <img src="./static/image/alcor_logo.png" class="bg-cover w-12"/>
        </div>
        
        <div class="section" id="section-user">
            <div class="flex justify-between items-center px-3 cursor-pointer font-semibold" data-toggle="user">
                <div>
                    <i class="fas fa-user w-6"></i>
                    <span class="section-name pl-2">User</span>
                </div>
                <i id="sectionIcon" class="fa-solid fa-chevron-left section-name"></i>
            </div>
            <ul id="submenu-user" class="submenu pl-8 py-3 mt-2 mr-0.5 space-y-2 text-gray-600 bg-white">
                <li class="sub-item" data-key="user"><a href="index.html" class="employee"><i
                            class="fas fa-user w-6"></i> Employee</a></li>
                <li class="sub-item" data-key="onboard"><a href="recruitment.html" class="employee"><i
                            class="fa-solid fa-address-book w-6"></i> Recruitment</a></li>
                <li class="sub-item" data-key="onboard"><a href="emp-access.html" class="employee"><i
                            class="fas fa-universal-access w-6"></i> Access</a></li>
            </ul>
        </div>

        <div class="section" id="section-timesheet">
            <div class="flex justify-between items-center px-3 cursor-pointer font-semibold" data-toggle="timesheet">
                <div>
                    <i class="fa-regular fa-calendar-days w-6"></i>
                    <span class="section-name pl-2">Time sheet</span>
                </div>
                <i id="sectionIcon" class="fa-solid fa-chevron-left section-name"></i>
            </div>
            <ul id="submenu-timesheet" class="submenu pl-8 py-3 mt-2 mr-0.5 space-y-2 text-gray-600 bg-white">
                <li class="" data-key="timesheet"><a href="timesheet.html" class="employee"><i
                            class="fa-solid fa-calendar-check w-6"></i> Timesheet</a></li>
                <li class="sub-item" data-key="timesheet"><a href="emp-timesheet.html" class="employee"><i
                            class="fa-solid fa-calendar-check w-6"></i> Employee</a></li>
                <li class="sub-item" data-key="request"><a href="leave-request.html" class="employee"><i
                            class="fa-solid fa-calendar-check w-6"></i> Leave Request</a></li>
                <li class="sub-item" data-key="timeoffpolicy"><a href="time-policy.html" class="employee"><i
                            class="fa-solid fa-calendar-week w-6"></i> Policy</a></li>
            </ul>
        </div>

        <div class="section" id="section-appraisal">
            <div class="flex justify-between items-center px-3 cursor-pointer font-semibold" data-toggle="appraisal">
                <div>
                    <i class="fa-solid fa-chart-simple w-6"></i>
                    <span class="section-name pl-2">Appraisal</span>
                </div>
                <i id="sectionIcon" class="fa-solid fa-chevron-left section-name"></i>
            </div>
            <ul id="submenu-appraisal" class="submenu pl-8 py-3 mt-2 mr-0.5 space-y-2 text-gray-600 bg-white">
                <li class="" data-key="appraisal"><a href="appraisal.html" class="employee"><i
                            class="fa-solid fa-chart-simple w-6"></i> Appraisal</a></li>
                <li class="sub-item" data-key="appraisalform"><a href="#" class="employee"><i
                            class="fa-regular fa-file w-6"></i> Appraisal Form</a></li>
            </ul>
        </div>

        <div class="section" id="section-roleaccess">
            <div class="flex justify-between items-center px-3 cursor-pointer font-semibold" data-toggle="roleaccess">
                <div>
                    <i class="fas fa-cog w-6"></i>
                    <span class="section-name pl-2">Role Access</span>
                </div>
                <i id="sectionIcon" class="fa-solid fa-chevron-left section-name"></i>
            </div>
            <ul id="submenu-roleaccess" class="submenu pl-8 py-3 mt-2 mr-0.5 space-y-2 text-gray-600 bg-white">
                <li class="sub-item" data-key="appraisal"><a href="role-access.html" class="employee"><i
                            class="fas fa-user w-6"></i> Role</a></li>
                <li class="sub-item" data-key="appraisalform"><a href="#" class="employee"><i
                            class="fa-solid fa-universal-access w-6"></i> Term Access</a></li>
                <li class="sub-item" data-key="appraisalform"><a href="#" class="employee"><i
                            class="fa-solid fa-sliders w-6"></i> Permission</a></li>
            </ul>
        </div>

    </div>
    <div class="absolute top-40 -right-2.5 text-xl text-white baricon cursor-pointer" id="toggleSidebar">
        <i class="fa-solid fa-circle-chevron-left shadow-sm shadow-third rounded-full bg-black"></i>
    </div>
</aside>
<script>
    $(function(){
    // Sidebar open/close
    $('#toggleSidebar').click(function () {
        $(this).toggleClass('rotate-180');
        $(".submenu").hide()
        $(".fa-chevron-left ").removeClass("-rotate-90")
        $(".section-name").toggleClass("hidden")
        $("aside").toggleClass("w-56 w-20")
        $(".section").find("div").toggleClass("justify-between justify-center")
    });

    function toggles() {
        $("#toggleSidebar").toggleClass('rotate-180');
        $(".section-name").toggleClass("hidden")
        $("aside").toggleClass("w-56 w-20")
        $(".section").find("div").toggleClass("justify-between justify-center")
    }

    toggles()

    $(document).ready(function () {
        // Section toggle
        $('[data-toggle]').on('click', function () {
            if ($("aside").hasClass("w-20")) {
                toggles()
            }
            const key = $(this).data('toggle');
            $("#submenu-" + key).slideToggle();
            $(this).find("i#sectionIcon").toggleClass("-rotate-90")
        });

        const permissions = JSON.parse($.cookie("my_access"))
        $('.sub-item').each(function () {
            const key = $(this).data('key');
            if (!permissions[key] || !permissions[key].includes('read')) {
                $(this).hide();
            }
        });

        let users = $("#section-user #submenu-user li:visible")
        if(users.length == 0)
            $("#section-user").hide()

        let role = $("#section-roleaccess #submenu-user li:visible")
        if(users.length == 0)
            $("#section-roleaccess").hide()
        
        $(".submenu").hide()
        
    });
})
</script>