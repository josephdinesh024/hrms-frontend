<!-- Sidebar -->
<aside class="min-w-16 bg-gradient-to-b from-primary to-blue-800 h-screen flex flex-col items-center py-4 relative transition-all ease-in-out" id="sidebar">
    <div class="pl-5 pt-2 min-w-16 w-full">
        <img src="./static/image/alcor_logo.png" class="bg-cover w-12"/>
    </div>
    <div class="space-y-2 flex flex-col mt-20" id="minisidebar">
        
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fas fa-user w-6"></i></h4>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fa-regular fa-calendar-days w-6"></i></h4>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fa-solid fa-chart-simple w-6"></i></h4>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fas fa-cog w-6"></i></h4>
            </div>
        </div>
        <!-- <a href="index.html" class="text-white employee" ><i class="fas fa-user"></i></a>
        <a href="timesheet.html" class="text-white timesheet" ><i class="fa-regular fa-calendar-days"></i></a>
        <a href="appraisal.html" class="text-white appraisal" ><i class="fa-solid fa-chart-simple"></i></a>
        <a id="roles" href="roleandaccess.html" class="text-white roleAccess" ><i class="fas fa-cog"></i></a> -->
        

        <div class="absolute -right-2.5 text-xl text-white baricon cursor-pointer" index="open">
            <!-- <i class="fa-solid fa-circle-chevron-left shadow-sm shadow-third rounded-full bg-black"></i> -->
            <i class="fa-solid fa-circle-chevron-right shadow-sm shadow-third rounded-full bg-black"></i>
        </div>
    </div>
    <div class="space-y-2 flex flex-col mt-20 hidden w-full" id="fullsidebar">
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fas fa-user w-6"></i> User</h4>
                <i id="sectionIcon" class="fa-solid fa-chevron-left"></i>
            </div>
            <div id="section" class="space-y-3 flex flex-col bg-white pl-4 py-3 w-full hidden">
                <a href="index.html" class="employee" ><i class="fas fa-user w-6"></i> User</a>
                <a href="employee_onboard.html" class="employee" ><i class="fas fa-user w-6"></i> Onboard</a>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fa-regular fa-calendar-days w-6"></i> Time Sheet</h4>
                <i id="sectionIcon" class="fa-solid fa-chevron-left"></i>
            </div>
            <div id="section" class="space-y-3 flex flex-col bg-white pl-4 py-3 w-full hidden">
                <a href="timesheet.html" class="timesheet" ><i class="fa-regular fa-calendar-days w-6"></i> Time Sheet</a>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fa-solid fa-chart-simple w-6"></i> Appraisal</h4>
                <i id="sectionIcon" class="fa-solid fa-chevron-left"></i>
            </div>
            <div id="section" class="space-y-3 flex flex-col bg-white pl-4 py-3 w-full hidden">
                <a href="appraisal.html" class="appraisal" ><i class="fa-solid fa-chart-simple w-6"></i> Appraisal</a>
            </div>
        </div>
        <div class="font-medium w-full menuSections cursor-pointer pr-1">
            <div class="flex justify-between items-center h-fit p-3 text-white">
                <h4><i class="fas fa-cog w-6"></i> Role</h4>
                <i id="sectionIcon" class="fa-solid fa-chevron-left"></i>
            </div>
            <div id="section" class="space-y-3 flex flex-col bg-white pl-4 py-3 w-full hidden">
                <a id="roles" href="roleandaccess.html" class="roleAccess" ><i class="fas fa-cog w-6"></i> Role</a> 
            </div>
        </div>
        <!-- <a href="index.html" class="text-white employee" ><i class="fas fa-user w-6"></i> User</a> -->
        <!-- <a href="timesheet.html" class="text-white timesheet" ><i class="fa-regular fa-calendar-days w-6"></i> Time Sheet</a> -->
        <!-- <a href="appraisal.html" class="text-white appraisal" ><i class="fa-solid fa-chart-simple w-6"></i> Appraisal</a> -->
        <!-- <a id="roles" href="roleandaccess.html" class="text-white roleAccess" ><i class="fas fa-cog w-6"></i> Role</a>  -->

        <div class="absolute -right-2.5 text-xl text-white baricon cursor-pointer" index="close">
            <i class="fa-solid fa-circle-chevron-left shadow-sm shadow-third rounded-full bg-black"></i>
            <!-- <i class="fa-solid fa-circle-chevron-right shadow-sm shadow-third rounded-full bg-black"></i> -->
        </div>
    </div>
</aside>


<script>
    $(function(){

        // Section function
        $(document).on("click",".menuSections",function(){
            let sections = $(this).find("div#section")
            let icon = $(this).find("#sectionIcon")
            let fullSideBar = $("#sidebar #fullsidebar")
            if(!(fullSideBar.is(":visible"))){
                sideBar("open")
            }else{
                if(sections.is(":visible")){
                    sections.addClass("hidden")
                    icon.removeClass("fa-chevron-down")
                    icon.addClass("fa-chevron-left")
                }else{
                    sections.removeClass("hidden")
                    icon.addClass("fa-chevron-down")
                    icon.removeClass("fa-chevron-left")
                }
            }
        })

        const access = JSON.parse($.cookie("my_access"))
        // console.log(access)
        // employee
        if("user" in access && access["user"].includes("read") && (access["user"].includes("create") || access["user"].includes("edit"))){
            $("a.employee").removeClass("hidden")
        }else{
            $("a.employee").addClass("hidden")
        }
        // // timesheet
        // if("timesheet" in access && access["timesheet"].includes("read")){
        //     $("a.timesheet").removeClass("hidden")
        // }else{
        //     $("a.timesheet").addClass("hidden")
        // }
        // // appraisal
        // if("appraisal" in access && access["appraisal"].includes("read")){
        //     $("a.appraisal").removeClass("hidden")
        // }else{
        //     $("a.appraisal").addClass("hidden")
        // }
        //role and access
        if("role" in access && access["role"].includes("read") && (access["role"].includes("create") || access["role"].includes("edit"))){
            $("a.roleAccess").removeClass("hidden")
        }else{
            $("a.roleAccess").addClass("hidden")
        }

        // SideBar
        $(document).ready(function () {

            $("#sidebar").mouseover(function () {
                $("#sidebar .baricon").each(function () {
                    $(this).removeClass("hidden")
                })
            })
            $("#sidebar").mouseleave(function () {
                $("#sidebar .baricon").each(function () {
                    $(this).addClass("hidden")
                })
            })

            $(document).on("click", "#sidebar .baricon", function () {
                sideBar($(this).attr("index"))
                $.cookie("my_sideBar_state", $(this).attr("index"))
            });

            sideBar($.cookie("my_sideBar_state"))
        });

        function sideBar(state){
            if (state === "open") {
                $("#sidebar #fullsidebar").removeClass("hidden")
                $("#sidebar #minisidebar").addClass("hidden")
                $("#sidebar").width("180px")
            }
            else {
                $("#sidebar #minisidebar").removeClass("hidden")
                $("#sidebar #fullsidebar").addClass("hidden")
                $("#sidebar").width("85px")
            }
        }

    });
</script>