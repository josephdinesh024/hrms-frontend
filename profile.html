<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRMS Users</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <!-- Custom Tailwind Theme -->
    <script src="./static/js/theme.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
    <script src="./static/js/theme.js"> </script>
    <script src="./static/js/profileAction.js"> </script>
    <script src="./static/js/global.js"></script>
    <!-- FontAwesome for Icons -->
    <script src="https://kit.fontawesome.com/5d4c9f5ac8.js" crossorigin="anonymous"></script>

</head>

<body class="flex bg-background h-screen w-screen">
    <div id="AlertMessageContainer" class="fixed top-4 right-4 space-y-4 z-50 max-w-sm"></div>
    <div id="sidebar"></div>

    <div class="flex-1 w-full">
        <!-- Header -->
        <div id="header"></div>

        <main id="usermain" class="flex-1 justify-items-center p-6 overflow-y-scroll h-[90vh]">
            <div class="w-full min-h-full max-w-6xl bg-white shadow-md rounded-lg overflow-hidden flex">
                <!-- Sidebar -->
                <div class="w-1/6 bg-gray-50 p-6 border-r">
                    <h3 class="font-semibold bg-gradient-to-r from-primary via-purple-600 to-blue-800 bg-clip-text text-transparent p-3"
                        id="employeeFullName">
                        aes000
                    </h3>
                    <div id="profile_image" class="text-xl font-semibold mb-6">
                        <img src="https://ui-avatars.com/api/?name=aes000" alt="Avatar"
                            class="w-20 h-20 rounded-full shadow">
                    </div>
                    <ul class="space-y-4 text-sm text-gray-700">
                        <li class="menu-item cursor-pointer font-bold text-blue-600" data-section="profile">Profile</li>
                        <li class="menu-item cursor-pointer" data-section="education">Education</li>
                        <li class="menu-item cursor-pointer" data-section="bank">Bank</li>
                        <li class="menu-item cursor-pointer" data-section="certificate">Certificates</li>
                        <!-- <li class="menu-item cursor-pointer" data-section="attendance">Attendance</li>
                        <li class="menu-item cursor-pointer" data-section="appraisal">Appraisal</li> -->
                        <li class="menu-item cursor-pointer" data-section="docs">Docs</li>
                    </ul>
                </div>

                <!-- Content -->
                <div id="content" class="w-3/4 p-8">
                    <div id="section-profile" class="section">
                        <h2 class="text-lg font-semibold mb-6">Personal Details</h2>
                        <div class="grid grid-cols-2 gap-6">
                            <div class="col-span-2">
                                <h4>Full Name</h4>
                                <div class="flex justify-between w-3/4 gap-4 mt-3">
                                    <span id="first_name" class="text-textPrimary border-b-2 w-full">First Name</span>
                                    <span id="last_name" class="text-textPrimary border-b-2 w-full">Last Name</span>
                                </div>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Employee ID</h4>
                                <span id="user_name" class="text-textPrimary">aes000</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Email</h4>
                                <span id="email" class="text-textPrimary">aes000@gmail.com</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Phone</h4>
                                <span id="phone" class="text-textPrimary">996******4</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Date of Birth</h4>
                                <span id="dob" class="text-textPrimary">dd/mm/yyyy</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Gender</h4>
                                <span id="gender" class="text-textPrimary">gender</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Address</h4>
                                <span id="address" class="text-textPrimary">address</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">City</h4>
                                <span id="city" class="text-textPrimary">city</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">State</h4>
                                <span id="state" class="text-textPrimary">state</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Country</h4>
                                <span id="country" class="text-textPrimary">country</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">PinCode</h4>
                                <span id="pincode" class="text-textPrimary">pincode</span>
                            </div>
                        </div>
                    </div>

                    <!-- EDUCATION  details -->
                    <div id="section-education" class="section">
                        <h2 class="text-lg font-semibold mb-6">Education Details</h2>
                        <div id="inner-container" class="w-full divide-y space-y-6">
                            <div class="grid grid-cols-2 gap-6 items-start text-sm">
                                <div class="border-b-2 w-3/4">
                                    <h4 class="mb-3">Degree</h4>
                                    <span id="degree" class="text-textPrimary">degree</span>
                                </div>
                                <div class="border-b-2 w-3/4">
                                    <h4 class="mb-3">Institution Name</h4>
                                    <span id="institution" class="text-textPrimary">school / college</span>
                                </div>
                                <div class="border-b-2 w-2/6 col-span-2">
                                    <h4 class="mb-3">Percentage</h4>
                                    <span id="percentage" class="text-textPrimary">mark</span>
                                </div>
                                <div class="border-b-2 w-3/4">
                                    <h4 class="mb-3">Start Year</h4>
                                    <span id="start_year" class="text-textPrimary">yyyy</span>
                                </div>
                                <div class="border-b-2 w-3/4">
                                    <h4 class="mb-3">End Year</h4>
                                    <span id="end_year" class="text-textPrimary">yyyy</span>
                                </div>
                                <div class="w-3/4">
                                    <h4 class="mb-3">Education Doc</h4>
                                    <div id="file_image" class="text-textPrimary cursor-pointer">
                                        <img src="" alt="education" class="w-20 h-20">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CERTIFICATE  details -->
                    <div id="section-certificate" class="section">
                        <h2 class="text-lg font-semibold mb-6">Certificates Details</h2>
                        <div id="inner-container" class="w-full divide-y space-y-6">
                            <div class="grid grid-cols-2 gap-6 items-start">
                                <div class="border-b-2 w-3/4">
                                    <h4 class="mb-3">Certificate Name</h4>
                                    <span id="name" class="text-textPrimary">name</span>
                                </div>
                                <div class="w-3/4">
                                    <h4 class="mb-3">Certifiacte Doc</h4>
                                    <span id="file_image" class="text-textPrimary cursor-pointer">
                                        <img src="" alt="certificate" class="w-20 h-20">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- BANK details -->
                    <div id="section-bank" class="section">
                        <h2 class="text-lg font-semibold mb-6">Bank Details</h2>
                        <div class="grid grid-cols-2 gap-6 items-start">
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Account Hold Name</h4>
                                <span id="holder_name" class="text-textPrimary">myaccount</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Bank Name</h4>
                                <span id="bank_name" class="text-textPrimary">bank name</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Account Number</h4>
                                <span id="account_number" class="text-textPrimary">996******4</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">IFSC code</h4>
                                <span id="ifsc_code" class="text-textPrimary">xyz000021</span>
                            </div>
                            <div class="border-b-2 w-3/4">
                                <h4 class="mb-3">Branch Name</h4>
                                <span id="branch" class="text-textPrimary">loaction</span>
                            </div>
                            <div class=" w-3/4">
                                <h4 class="mb-3">Passbook Image</h4>
                                <div id="file_image" class="text-textPrimary" onclick="">
                                    <img src="" alt="passbook" class="w-20 h-20 cursor-pointer">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Docs details -->
                    <div id="section-docs" class="section">
                        <h2 class="text-lg font-semibold mb-6">Document Details</h2>
                        <div id="inner-container" class="w-full space-y-2">
                            <div class="grid grid-cols-1 gap-6 items-start" id="terms_condition">
                                <h2 class="text-lg font-bold">Terms & Conditions</h2>
                                <div class="border-b-2 w-1/2">
                                    <label>
                                        <input type="checkbox" disabled>
                                        <span id="name" class="text-textPrimary">Terms Accepted</span>
                                    </label>
                                </div>
                                <div class="w-fit border-b-2 mb-4">
                                    <span class="mb-3">Terms Doc</span>
                                    <span id="file_image" class="text-textPrimary cursor-pointer">
                                        <img src="" alt="terms" class="w-20 h-20">
                                    </span>
                                </div>
                            </div>
                            <hr>
                            <div class="grid grid-cols-1 gap-6 mt-4 " id="offer_letter">
                                <h2 class="text-lg font-bold">Offer Letter</h2>
                                <div class="w-fit border-b-2">
                                    <span class="mb-3">Offer Doc</span>
                                    <span id="file_image" class="text-textPrimary cursor-pointer">
                                        <img src="" alt="offer" class="w-20 h-20">
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script>
        let MyProfileData
        function initFun() {
            try {
                fetch(`${DomainURL}/my/profile`, {
                    headers: {
                        "Content-Type": "application/json",
                        Authorization: `Bearer ${access_token}`
                    },
                    method: "GET",
                })
                    .then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
                    .then(data => {
                        if (data.status) {
                            MyProfileData = data.user
                            // console.log(MyProfileData)
                            $(`#content #section-profile span#user_name`).text(MyProfileData.user_name)
                            $(`#content #section-profile span#email`).text(MyProfileData.email)
                            profileDataExtraction(MyProfileData.profile, "section-profile")
                            bankDataExtraction(MyProfileData.bank, "section-bank")
                            certificateDataExtraction(MyProfileData.file, "section-certificate")
                            educationDataExtraction(MyProfileData.education, "section-education")
                        }
                    })
            } catch (error) {
                showAlertMessage("warning", "API error", error)
            }
        }

        $(document).ready(function () {
            initFun()
            $("#usermain .menu-item").click(function () {
                $("#usermain .menu-item").removeClass("font-bold text-blue-600")
                $(this).addClass("font-bold text-blue-600")

                let section = $(this).attr("data-section")
                if(section === "docs"){
                    onboardDocs()
                }
                $("#usermain .section").hide()
                $(`#usermain #section-${section}`).show()
            })
            $("#usermain .section").hide()
            $(`#usermain #section-profile`).show()
        })

        function onboardDocs() {
            try {
                fetch(`${DomainURL}/my/onboard`, {
                    headers: {
                        "Content-Type": "application/json",
                        Authorization: `Bearer ${access_token}`
                    },
                    method: "GET",
                })
                    .then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
                    .then(data => {
                        if (data.status) {
                            docsDataExtraction(data.onboard,"section-docs",false)
                        }else{
                            showAlertMessage("warning", "API error", data.message)
                        }
                    })
            } catch (error) {
                showAlertMessage("warning", "API error", error)
            }
        }


    </script>


</body>

</html>