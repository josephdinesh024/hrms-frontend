<div class="w-full min-h-full max-w-6xl bg-white shadow-md rounded-lg overflow-hidden flex">
    <!-- Sidebar -->
    <div class="max-w-1/4 min-w-1/6 bg-gray-50 p-6 border-r">
        <h3 class="font-semibold bg-gradient-to-r from-primary via-purple-600 to-blue-800 bg-clip-text text-transparent p-3"
            id="employeeFullName">
            aes000
        </h3>
        <div id="profile_image" class="flex-1 justify-items-center mb-2">
            <img src="https://ui-avatars.com/api/?name=aes000" alt="Avatar" class="w-20 h-20 rounded-full shadow">
        </div>
        <div id="employeeStatus" class="text-center w-full mb-8 cursor-pointer menu-item" data-section="status">

        </div>
        <ul class="space-y-4 text-sm text-gray-700">
            <li class="menu-item cursor-pointer font-bold text-blue-600" data-section="profile">Profile</li>
            <li class="menu-item cursor-pointer" data-section="education">Education</li>
            <li class="menu-item cursor-pointer" data-section="bank">Bank</li>
            <li class="menu-item cursor-pointer" data-section="certificate">Certificates</li>
            <li class="menu-item cursor-pointer" data-section="attendance">Attendance</li>
            <li class="menu-item cursor-pointer" data-section="appraisal">Appraisal</li>
            <li class="menu-item cursor-pointer" data-section="docs">Docs</li>
        </ul>
    </div>

    <!-- Content -->
    <div id="content" class="w-full p-8">
        <div id="section-profile" class="section">
            <h2 class="text-lg font-semibold mb-6">Personal Details</h2>
            <div class="grid grid-cols-2 gap-6">
                <div class="col-span-2">
                    <h4>Full Name</h4>
                    <div class="flex justify-between w-3/4 gap-4 mt-3">
                        <span id="first_name" class="text-textPrimary border-b-2 w-full">First Name</span>
                        <span id="last_name" class="text-textPrimary border-b-2 w-full">Last Name</span>
                    </div>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Employee ID</h4>
                    <span id="user_name" class="text-textPrimary">aes000</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Email</h4>
                    <span id="email" class="text-textPrimary">aes000@gmail.com</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Phone</h4>
                    <span id="phone" class="text-textPrimary">996******4</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Date of Birth</h4>
                    <span id="dob" class="text-textPrimary">dd/mm/yyyy</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Gender</h4>
                    <span id="gender" class="text-textPrimary">gender</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Address</h4>
                    <span id="address" class="text-textPrimary">address</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">City</h4>
                    <span id="city" class="text-textPrimary">city</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">State</h4>
                    <span id="state" class="text-textPrimary">state</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Country</h4>
                    <span id="country" class="text-textPrimary">country</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">PinCode</h4>
                    <span id="pincode" class="text-textPrimary">pincode</span>
                </div>
            </div>
        </div>

        <!-- EDUCATION  details -->
        <div id="section-education" class="section">
            <h2 class="text-lg font-semibold mb-6">Education Details</h2>
            <div id="inner-container" class="w-full divide-y space-y-6">
                <div class="grid grid-cols-2 gap-6 items-start text-sm">
                    <div class="border-b-2 w-3/4">
                        <h4 class="mb-3">Degree</h4>
                        <span id="degree" class="text-textPrimary">degree</span>
                    </div>
                    <div class="border-b-2 w-3/4">
                        <h4 class="mb-3">Institution Name</h4>
                        <span id="institution" class="text-textPrimary">school / college</span>
                    </div>
                    <div class="border-b-2 w-2/6 col-span-2">
                        <h4 class="mb-3">Percentage</h4>
                        <span id="percentage" class="text-textPrimary">mark</span>
                    </div>
                    <div class="border-b-2 w-3/4">
                        <h4 class="mb-3">Start Year</h4>
                        <span id="start_year" class="text-textPrimary">yyyy</span>
                    </div>
                    <div class="border-b-2 w-3/4">
                        <h4 class="mb-3">End Year</h4>
                        <span id="end_year" class="text-textPrimary">yyyy</span>
                    </div>
                    <div class="w-3/4">
                        <h4 class="mb-3">Education Doc</h4>
                        <div id="file_image" class="text-textPrimary cursor-pointer">
                            <img src="" alt="education" class="w-20 h-20">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CERTIFICATE  details -->
        <div id="section-certificate" class="section">
            <h2 class="text-lg font-semibold mb-6">Certificates Details</h2>
            <div id="inner-container" class="w-full divide-y space-y-6">
                <div class="grid grid-cols-2 gap-6 items-start">
                    <div class="border-b-2 w-3/4">
                        <h4 class="mb-3">Certificate Name</h4>
                        <span id="name" class="text-textPrimary">name</span>
                    </div>
                    <div class="w-3/4">
                        <h4 class="mb-3">Certifiacte Doc</h4>
                        <span id="file_image" class="text-textPrimary cursor-pointer">
                            <img src="" alt="certificate" class="w-20 h-20">
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- BANK details -->
        <div id="section-bank" class="section">
            <h2 class="text-lg font-semibold mb-6">Bank Details</h2>
            <div class="grid grid-cols-2 gap-6 items-start">
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Account Hold Name</h4>
                    <span id="holder_name" class="text-textPrimary">myaccount</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Bank Name</h4>
                    <span id="bank_name" class="text-textPrimary">bank name</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Account Number</h4>
                    <span id="account_number" class="text-textPrimary">996******4</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">IFSC code</h4>
                    <span id="ifsc_code" class="text-textPrimary">xyz000021</span>
                </div>
                <div class="border-b-2 w-3/4">
                    <h4 class="mb-3">Branch Name</h4>
                    <span id="branch" class="text-textPrimary">loaction</span>
                </div>
                <div class=" w-3/4">
                    <h4 class="mb-3">Passbook Image</h4>
                    <div id="file_image" class="text-textPrimary" onclick="">
                        <img src="" alt="passbook" class="w-20 h-20 cursor-pointer">
                    </div>
                </div>
            </div>
        </div>

        <!-- Docs details -->
        <div id="section-docs" class="section">
            <h2 class="text-lg font-semibold mb-6">Document Details</h2>
            <div id="inner-container" class="w-full space-y-2">
                <table class="w-full border-collapse text-xs">
                    <thead>
                        <tr class="bg-gray-50 text-gray-700 text-left">
                            <th class="p-4 border-b">Document Name</th>
                            <th class="p-4 border-b">Uplaod</th>
                            <th class="p-4 border-b">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ATTENDANCE -->
        <div id="section-attendance" class="section w-full"></div>

        <!-- EMPLOYEE Status -->
        <div id="section-status" class="section w-64 relative mt-8">
            <div class="my-6">
                <label class="w-full text-sm text-blue-500">Employee status</label>
                <select
                    class="w-full border-b-2 border-gray-300 bg-transparent text-sm focus:outline-none focus:border-blue-500"
                    id="status" name="status">
                </select>
            </div>
            <div class="absolute right-0">
                <button id="status-change" onclick="empStatusUpdate()" class="py-2 px-8 shadow-sm shadow-third rounded-lg font-semibold text-third text-xs 
                hover:bg-gradient-to-r from-primary from-5% to-blue-800 hover:text-white transition-all duration-500">
                    Change
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    let MyProfileData
    let selectedID = urlParams.get("employee_id")
    let empStatus
    function initFun(ID) {
        try {
            ProgressLoading(true)
            fetch(`${DomainURL}/user/${ID}`, {
                headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${access_token}`
                },
                method: "GET",
            })
                .then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
                .then(data => {
                    if (data.status) {
                        MyProfileData = data.user[0]
                        empStatus = MyProfileData.status
                        // console.log(MyProfileData)
                        $(`#content #section-profile span#user_name`).text(MyProfileData.user_name)
                        $(`#content #section-profile span#email`).text(MyProfileData.email)
                        $(`#selectedEmployee div#employeeStatus`).html(StatusColourCode(empStatus))
                        $("#section-status select#status").val(empStatus)
                        profileDataExtraction(MyProfileData.profile, "section-profile")
                        bankDataExtraction(MyProfileData.bank, "section-bank")
                        certificateDataExtraction(MyProfileData.file, "section-certificate")
                        educationDataExtraction(MyProfileData.education, "section-education")
                    }
                    ProgressLoading(false)
                })
        } catch (error) {
            ProgressLoading(false)
            showAlertMessage("warning", "API error", error)
        }
    }

    $(document).ready(function () {
        if (selectedID)
            initFun(selectedID)
        // global var
        Object.keys(statusNames).forEach(key => {
            $("#section-status select#status").append(`<option value=${key}>${statusNames[key]}</option>`)
        })
        $("#selectedEmployee .menu-item").click(function () {
            $("#selectedEmployee .menu-item").removeClass("font-bold text-blue-600")
            $(this).addClass("font-bold text-blue-600")

            let section = $(this).attr("data-section")
            if (section === "attendance") {
                $("#selectedEmployee #section-attendance").load("./componnet/timesheet/attendance.html")
                initAttendFun(selectedID)
            } else if (section === "docs") {
                MyDocument()
            }
            $("#selectedEmployee .section").hide()
            $(`#selectedEmployee #section-${section}`).show()
        })
        $("#selectedEmployee .section").hide()
        $(`#selectedEmployee #section-profile`).show()
    })

    function empStatusUpdate() {
        try {
            ProgressLoading(true)
            fetch(`${DomainURL}/user/status/${selectedID}`, {
                headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${access_token}`
                },
                method: "PUT",
                body: JSON.stringify({
                    "status": parseInt($("#section-status select#status").val())
                })
            })
                .then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
                .then(data => {
                    if (data.status) {
                        showAlertMessage("success", "Employee", "Employee Status updated")
                        setTimeout(() => { initFun(selectedID) }, 500)
                    } else {
                        showAlertMessage("Error", "Employee", data.message)
                    }
                    ProgressLoading(false)
                })
        } catch (error) {
            ProgressLoading(false)
            showAlertMessage("warning", "API error", error)
        }
    }

    // let attendanceData = []
    //     function initAttendFun(stDate = '', eDate = '') {
    //         try {
    // ProgressLoading(true)
    //             fetch(`${DomainURL}/timesheet/attendance?user_id=${selectedID}&start_date=${stDate}&end_date=${eDate}`, {
    //                 method: "GET",
    //                 headers: {
    //                     "Content-Type": "application/json",
    //                     Authorization: `Bearer ${access_token}`
    //                 },
    //             }).then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
    //                 .then(data => {
    //                     console.log(data)
    //                     if (data.status) {
    //                         attendanceData = data.data
    //                         renderCalendar()
    //                     } else {
    //                         showAlertMessage("error", "Onboard", "Error to fetch details. " + data?.message)
    //                     }
    // ProgressLoading(false)
    //                 })
    //         } catch (error) {
    // ProgressLoading(false)
    //             showAlertMessage("warning", "API error", error)
    //         }
    //     }

    function MyDocument() {
        try {
            ProgressLoading(true)
            fetch(`${DomainURL}/document/employee/${selectedID}`, {
                headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${access_token}`
                },
                method: "GET",
            })
                .then(res => res.ok ? res.json() : showAlertMessage("warning", "API error", `${res.status} ${res.statusText}`))
                .then(data => {
                    if (data.status) {
                        documentDataExtraction(data, "section-docs", false,false)
                    } else {
                        showAlertMessage("warning", "API error", data.message)
                    }
                    ProgressLoading(false)
                })
        } catch (error) {
            ProgressLoading(false)
            showAlertMessage("warning", "API error", error)
        }
    }



</script>